
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>YouTube急成長チャンネル検索</title>
</head>
<body>
    <h1>YouTube急成長チャンネル検索</h1>

    <form method="GET" action="/">
        <input type="text" name="keyword" value="{{ keyword }}" placeholder="キーワードを入力">
        <label><input type="checkbox" name="growth_filter" value="3" {% if growth_filter == "3" %}checked{% endif %}> 3か月以内</label>
        <label><input type="checkbox" name="growth_filter" value="6" {% if growth_filter == "6" %}checked{% endif %}> 6か月以内</label>
        <select name="genre_filter">
            <option value="">ジャンル指定なし</option>
            {% for genre in genres %}
            <option value="{{ genre }}" {% if genre == genre_filter %}selected{% endif %}>{{ genre }}</option>
            {% endfor %}
        </select>
        <button type="submit">検索</button>
    </form>

    <div>
        🔢 検索回数：{{ search_count }} / 50
    </div>

    {% if channels %}
    <table border="1" cellpadding="5">
        <thead>
            <tr>
                <th>チャンネル名（リンク）</th>
                <th>登録者数</th>
                <th>総再生数</th>
                <th>公式カテゴリ</th>
                <th>独自ジャンル</th>
                <th>作成日</th>
            </tr>
        </thead>
        <tbody>
            {% for ch in channels %}
            <tr>
                <td><a href="{{ ch.link }}" target="_blank">{{ ch.title }}</a></td>
                <td>{{ ch.subs }}</td>
                <td>{{ ch.views }}</td>
                <td>{{ ch.category }}</td>
                <td>{{ ch.genre }}</td>
                <td>{{ ch.published_at }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</body>
</html>
